# SpringCloud 理论知识
==**微服务**== 
- 是一个架构设计模式,为了解决单体服务日益臃肿的问题(随着需求,业务的增加,单体服务不可避免的越来越臃肿),将一个传统的单体服务拆分为多个小型的服务,这些小型服务都运行在独立的进程内,并通过 HTTP 协议进行通信.

==**涉及到的技术**==
- Spring Boot : Spring Cloud 基于 Spring Boot 
- Sprong Boot Actuator : 提供系统监控,让外部可以看到系统的健康情况

## 1. ==**SpringCloud**== 
- SpringCloud 并不是一个框架, 而是一个工具箱,包含了微服务解决方案.

- SpringCloud 的每个项目都基于 ==**Springboot**==,将 ==**[Netflix](#Netflix)**== 进行二次封装.并使用自动配置的方式将这些框架绑定到 Spring 环境中,从未简化这些框架的使用

- Spring cloud 包含的模块 : 
    - ==**Spring Cloud Netflix**==.
    - ==**Spring Cloud Config**== : ==*服务配置*==
    - ==**Spring Cloud Sleuth**== : ==*服务跟踪*==
    - ==**Spring Cloud Stream**== : 构建==*消息驱动微服务*== 的框架
    - ==**Spring Cloud Bus**== : 连接 ==*RabbitMQQ, kafka*== 等消息代理的 ==*集群消息总线*==`
- SpringCloud Netflix 模块主要封装了 ==**Netflix**== 的以下项目:
    - ==**Eureka**== : 基于 REST 的分布式中间件,主要实现 ==**服务管理(服务注册中间,服务注册,发现服务)**==.
    - ==**Hystrix**== : ==*容错框架*==,通过添加 ==*延迟阈值*== 或者 ==*容错逻辑*==, 来控制分布式系统中组件的交互.
    - ==**Feign**== : 一个 REST 客户端,为了简化 ==*web service*== 客户端的开发.
    - ==**Ribbon**== : ==*负载均衡框架*==, 为微服务集群中的各个 ==*客户端*== 之间的通信提供支持,Ribbon 主要实现 ==*中间层应用程序的负载均衡*==.
    - ==**Zuul**== : 为微服务提供 ==*代理, 过滤, 路由*== 等功能.

## 2. ==**Spring Cloud Netflix**==
### 2.1 ==**Eureka**==
- eureka 提供 ==*服务治理功能(服务注册中心,服务注册,发现服务等)*==
- 一个 eureak 集群需要一个 eureka 服务器,若干个服务提供者.
- eureka 服务器可以有 ==*多个*==, ==*每个 eureka 服务器都注册到其他的 eureka 服务器中,就组成了高可用服务集群.*==

#### 2.1.1 ==**Eureka 服务器**==
- 注册中心
- 注册到服务注册中心的服务组件,eureka 并没有提供后台的存储,这些注册的服务实例保存在 ==*内存的注册中心*==, 并通过 ==*心跳机制*== 来保持最新状态.

#### 2.1.2 ==**Eureka 服务提供者**==
- 作为 Eureka 客户端存在的服务提供者,主要进行三个工作 :
    - ==*向服务器注册服务*==
    - ==*向服务器发送心跳*==
    - ==*获取注册信息列表*==
- 当服务提供者想服务器注册服务时,会提供一些自己的信息,比如 ==*主机, 端口, 健康监测连接*== 等.

#### 2.1.3 ==**Eureka 服务调用者**==
- 对于发布到 Eureka 服务器的服务,服务调用者可以对其进行 ==*服务查找与调用*==.
- 服务调用者也是作为 ==*客户端*== 存在的,但其主要职责是进行 ==*服务发现*== 与 ==*调用*==.
- 实际项目中也会出现既是服务提供者又是服务调用者的情况.

#### 2.1.4 服务实例健康自检
- Eureka 客户端默认每 30 秒向 Eureka 服务器发送一次心跳.
- 实际生产中可能会出现虽然发送心跳,但是其实服务已经不可用的情况,所以需要健康自检
- ==**Spring Boot Actuator**== 模块用于系统监控,当应用集成了 Actuator 后,它就会自动提供多个服务端点,这些端点可以让外部看到应用的健康情况

#### 2.1.5 元数据
- 框架自带元数据,包括实例 ID, 主机名称,IP 等信息
- 如果想使用自定义元数据,可通过 ==*erueka.instance.metadata-map*== 配置项在配置文件中配置,数据格式为map










## 手册
### 名词解释
==**Netflix**== <span id="Netflix"/>
- Netflix 是一个互联网视频提供商,提供了很多关于微服务的解决方案